(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{25:function(e,t,n){e.exports={navLink:"AuthNav_navLink__1nsH_",activeNavLink:"AuthNav_activeNavLink__1pspS"}},26:function(e,t,n){e.exports={navLink:"Navigation_navLink__3NBMf",activeNavLink:"Navigation_activeNavLink__1-MfO"}},27:function(e,t,n){e.exports={usermenuCont:"UserMenu_usermenuCont__1o-Y1",avatarImg:"UserMenu_avatarImg__VQMAo",userName:"UserMenu_userName__2lDwL",logoutBtn:"UserMenu_logoutBtn__QJIG8"}},48:function(e,t,n){e.exports={header:"AppBar_header__1rbqQ"}},49:function(e,t,n){e.exports={ContainerPage:"Container_ContainerPage__d7Z75"}},50:function(e,t,n){e.exports={mainContainer:"MainContainer_mainContainer__2OfSr"}},57:function(e,t,n){},7:function(e,t,n){"use strict";n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return a})),n.d(t,"h",(function(){return u})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return j})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return O}));var r=n(3),c=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),u=Object(r.b)("contacts/fetchContactsError"),o=Object(r.b)("contacts/addContactRequest"),s=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),b=Object(r.b)("contacts/deleteContactRequest"),j=Object(r.b)("contacts/deleteContactSuccess"),l=Object(r.b)("contacts/deleteContactError"),O=(Object(r.b)("phonebook/Delete"),Object(r.b)("phonebook/changeFilter"))},89:function(e,t,n){"use strict";n.r(t);var r,c,a,u=n(0),o=n.n(u),s=n(28),i=n.n(s),b=(n(57),n(8)),j=n(15),l=n(25),O=n(1),d=function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(j.b,{to:"/register",exact:!0,className:l.navLink,activeClassName:l.activeNavLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(O.jsx)(j.b,{to:"/login",exact:!0,className:l.navLink,activeClassName:l.activeNavLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},f=n(26),g=n(9),h=function(){var e=Object(b.c)(g.c.getIsAuthenticated);return Object(O.jsxs)("div",{children:[Object(O.jsx)(j.b,{to:"/",exact:!0,className:f.navLink,activeClassName:f.activeNavLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e&&Object(O.jsx)(j.b,{to:"/contacts",exact:!0,className:f.navLink,activeClassName:f.activeNavLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})},p=n(27),v=n.p+"static/media/avatar.e2cd5f45.jpg",x=function(){var e=Object(b.c)(g.c.getUsername),t=Object(b.b)(),n=Object(u.useCallback)((function(){t(g.a.logOut())}),[t]);return Object(O.jsxs)("div",{className:p.usermenuCont,children:[Object(O.jsx)("img",{src:v,alt:"",width:"32",className:p.avatarImg}),Object(O.jsxs)("span",{className:p.userName,children:["Welcome, ",e,"! "]}),Object(O.jsx)("button",{type:"button",onClick:n,className:p.logoutBtn})]})},m=n(48),k=function(){var e=Object(b.c)(g.c.getIsAuthenticated);return Object(O.jsxs)("header",{className:m.header,children:[Object(O.jsx)(h,{}),e?Object(O.jsx)(x,{}):Object(O.jsx)(d,{})]})},C=n(5),_=n(18),N=n(30),S=function(e){var t=e.component,n=e.redirectTo,r=Object(N.a)(e,["component","redirectTo"]),c=Object(b.c)(g.c.getIsAuthenticated);return Object(O.jsx)(C.b,Object(_.a)(Object(_.a)({},r),{},{render:function(e){return c?Object(O.jsx)(t,Object(_.a)({},e)):Object(O.jsx)(C.a,{to:n})}}))},E=function(e){var t=e.component,n=e.redirectTo,r=Object(N.a)(e,["component","redirectTo"]),c=Object(b.c)(g.c.getIsAuthenticated);return Object(O.jsx)(C.b,Object(_.a)(Object(_.a)({},r),{},{render:function(e){return c&&r.restricted?Object(O.jsx)(C.a,{to:n}):Object(O.jsx)(t,Object(_.a)({},e))}}))},y=n(49),U=function(e){var t=e.children;return Object(O.jsx)("div",{className:y.ContainerPage,children:t})},L=n(50),q=function(e){var t=e.children;return Object(O.jsx)("div",{className:L.mainContainer,children:t})},w=Object(u.lazy)((function(){return n.e(7).then(n.bind(null,116))})),R=Object(u.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,119))})),I=Object(u.lazy)((function(){return n.e(6).then(n.bind(null,117))})),A=Object(u.lazy)((function(){return n.e(5).then(n.bind(null,118))})),M=function(){var e=Object(b.b)();return Object(u.useEffect)((function(){e(g.a.getCurrentUser())}),[e]),Object(O.jsxs)(U,{children:[Object(O.jsx)(k,{}),Object(O.jsx)(u.Suspense,{fallback:Object(O.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(O.jsx)(q,{children:Object(O.jsxs)(C.d,{children:[Object(O.jsx)(E,{exact:!0,path:"/",component:w}),Object(O.jsx)(S,{path:"/contacts",component:R,redirectTo:"/login"}),Object(O.jsx)(E,{path:"/register",restricted:!0,component:I,redirectTo:"/contacts"}),Object(O.jsx)(E,{path:"/login",restricted:!0,component:A,redirectTo:"/contacts"})]})})})]})},z=n(21),B=n(3),T=n(17),P=n(51),J=n.n(P),Q=n(2),D=n(6),F=n(7),G=Object(B.c)([],(r={},Object(Q.a)(r,F.j,(function(e,t){return t.payload})),Object(Q.a)(r,F.c,(function(e,t){return[].concat(Object(z.a)(e),[t.payload])})),Object(Q.a)(r,F.g,(function(e,t){var n=e.findIndex((function(e){return e.id===t.payload}));return[].concat(Object(z.a)(e.slice(0,n)),Object(z.a)(e.slice(n+1)))})),r)),H=Object(B.c)("",Object(Q.a)({},F.d,(function(e,t){return t.payload}))),V=Object(B.c)(!1,(c={},Object(Q.a)(c,F.i,(function(){return!0})),Object(Q.a)(c,F.j,(function(){return!1})),Object(Q.a)(c,F.h,(function(){return!1})),Object(Q.a)(c,F.b,(function(){return!0})),Object(Q.a)(c,F.c,(function(){return!1})),Object(Q.a)(c,F.a,(function(){return!1})),Object(Q.a)(c,F.f,(function(){return!0})),Object(Q.a)(c,F.g,(function(){return!1})),Object(Q.a)(c,F.e,(function(){return!1})),c)),W=Object(B.c)(null,(a={},Object(Q.a)(a,F.h,(function(e,t){return t.payload})),Object(Q.a)(a,F.i,(function(){return null})),Object(Q.a)(a,F.b,(function(){return null})),a)),Y=Object(D.c)({items:G,filter:H,loading:V,error:W}),Z=Object(z.a)(Object(B.d)({serializableCheck:{ignoredActions:[T.a,T.f,T.b,T.c,T.d,T.e]}})),K={key:"auth",storage:J.a,whitelist:["token"]},X=Object(B.a)({reducer:{auth:Object(T.g)(K,g.b),contacts:Y},middleware:Z}),$={store:X,persistor:Object(T.h)(X)},ee=n(52);i.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(b.a,{store:$.store,children:Object(O.jsx)(ee.a,{loading:null,persistor:$.persistor,children:Object(O.jsx)(j.a,{children:Object(O.jsx)(M,{})})})})}),document.getElementById("root"))},9:function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return q})),n.d(t,"c",(function(){return w}));var r,c,a,u,o=n(3),s=Object(o.b)("auth/registerRequest"),i=Object(o.b)("auth/registerSuccess"),b=Object(o.b)("auth/registerError"),j=Object(o.b)("auth/loginRequest"),l=Object(o.b)("auth/loginSuccess"),O=Object(o.b)("auth/loginError"),d={registerRequest:s,registerSuccess:i,registerError:b,logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),loginRequest:j,loginSuccess:l,loginError:O,getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(o.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")},f=n(2),g=n(6),h={name:null,email:null},p=Object(o.c)(h,(r={},Object(f.a)(r,d.registerSuccess,(function(e,t){return t.payload.user})),Object(f.a)(r,d.loginSuccess,(function(e,t){return t.payload.user})),Object(f.a)(r,d.logoutSuccess,(function(){return h})),Object(f.a)(r,d.getCurrentUserSuccess,(function(e,t){return t.payload})),r)),v=Object(o.c)(null,(c={},Object(f.a)(c,d.registerSuccess,(function(e,t){return t.payload.token})),Object(f.a)(c,d.loginSuccess,(function(e,t){return t.payload.token})),Object(f.a)(c,d.logoutSuccess,(function(){return null})),c)),x=function(e,t){return t.payload},m=Object(o.c)(null,(a={},Object(f.a)(a,d.registerError,x),Object(f.a)(a,d.loginError,x),Object(f.a)(a,d.logoutError,x),Object(f.a)(a,d.getCurrentUserError,x),a)),k=Object(o.c)(!1,(u={},Object(f.a)(u,d.registerSuccess,(function(){return!0})),Object(f.a)(u,d.loginSuccess,(function(){return!0})),Object(f.a)(u,d.getCurrentUserSuccess,(function(){return!0})),Object(f.a)(u,d.registerError,(function(){return!1})),Object(f.a)(u,d.loginError,(function(){return!1})),Object(f.a)(u,d.getCurrentUserError,(function(){return!1})),Object(f.a)(u,d.logoutSuccess,(function(){return!1})),u)),C=Object(g.c)({user:p,isLoggedIn:k,token:v,error:m}),_=n(16),N=n.n(_),S=n(23),E=n(19),y=n.n(E);y.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var U=function(e){y.a.defaults.headers.common.Authorization="Bearer ".concat(e)},L=function(){y.a.defaults.headers.common.Authorization=""},q={register:function(e){return function(){var t=Object(S.a)(N.a.mark((function t(n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(d.registerRequest()),t.prev=1,t.next=4,y.a.post("/users/signup",e);case 4:r=t.sent,U(r.data.token),n(d.registerSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(d.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(S.a)(N.a.mark((function t(n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(d.loginRequest()),t.prev=1,t.next=4,y.a.post("/users/login",e);case 4:r=t.sent,U(r.data.token),n(d.loginSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(d.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(S.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(d.logoutRequest()),e.prev=1,e.next=4,y.a.post("/users/logout");case 4:L(),t(d.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(d.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(S.a)(N.a.mark((function e(t,n){var r,c,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),c=r.auth.token){e.next=3;break}return e.abrupt("return");case 3:return U(c),t(d.getCurrentUserRequest()),e.prev=5,e.next=8,y.a.get("/users/current");case 8:a=e.sent,t(d.getCurrentUserSuccess(a.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(d.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}},w={getIsAuthenticated:function(e){return e.auth.isLoggedIn},getUsername:function(e){return e.auth.user.name}}}},[[89,1,2]]]);
//# sourceMappingURL=main.54a6bb04.chunk.js.map